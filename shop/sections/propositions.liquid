<style >
 {% for block in section.blocks %}
  {% if block.settings.bg != blank %}
    #block-{{ block.id }} .PropositionsContent{
      background-image: url("{{ block.settings.bg | img_url:'master' }}");
    }
  {% endif %}
    #block-{{ block.id }} .button-slide{
       background: {{ block.settings.button-color }};
     }
  {% endfor %}
</style>
<section id="section-{{ section.id }}" class="relative" data-section-id="{{ section.id }}" data-section-type="propositions">
  <div class="container container--bordered">
     <div class="grid">
       {% assign number = 0 %}
        {% for block in section.blocks %}
         <div id="block-{{ block.id }}" class="1/3--lap-and-up grid__cell">
            <div class="PropositionsContent {% unless forloop.last == true %} block__bordered {% endunless %}">
              <div>
                 <div class="slide__counter">
                   {% assign number = number | plus:1 %}
                   <span>{{ number }}</span>
                   <p class="number__line"></p>
                 </div>
                 <h2 class="h1 PropositionTitle">{{ block.settings.title }}</h2>
                 <p class="PropositionSubtitle">{{ block.settings.subtitle }}</p>
                 <div class="">
                   {{ block.settings.content }}
                 </div>
              </div>
               {% if block.settings.button != blank %}
               <div class="PropositionsButton">
                 <div class="button button-custom">
                    <div class="button-slide"></div>
                    <a href="{{ block.settings.url }}">{{ block.settings.button }}</a>
                 </div>
               </div>
               {% endif %}
            </div>
         </div>
        {% endfor %}
     </div>
  </div>
</section>
{% schema %}
{
  "name": "Propositions",
  "settings": [

  ],
  "blocks": [
    {
      "type": "proposition",
      "name": "Proposition",
      "limit": 3,
      "settings": [
           {
             "type": "text",
             "id": "title",
             "label": "title",
             "default": "Title"
           },
           {
             "type": "text",
             "id": "subtitle",
             "label": "Subtitle",
             "default": "subtitle"
           },
           {
             "type": "richtext",
             "id": "content",
             "label": "Content",
             "info": "info",
             "default": "<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. </p>"
           },
           {
             "type": "text",
             "id": "button",
             "label": "Button",
             "default": "Je veux savoir plus"
           },
           {
             "type": "url",
             "id": "url",
             "label": "Link"
           },
           {
             "type": "color",
             "id": "button-color",
             "label": "Button color",
             "default": "#FDDB58"
           },
           {
             "type": "image_picker",
             "id": "bg",
             "label": "Background image"
           }
      ]
    }
  ],
  "presets": [
		{
			"name": "Propositions",
			"category": "Text"
		}
	]
}
{% endschema %}
